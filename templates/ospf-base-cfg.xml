<config-template xmlns="http://tail-f.com/ns/config/1.0">
    <devices xmlns="http://tail-f.com/ns/ncs">
        <device>
            <name>{$DEVICE}</name>
            <config>
                <route-map xmlns="http://tail-f.com/ned/cisco-nx">
                    <name>{$STATIC_RM_V4}</name>
                    <sequence>10</sequence>
                    <match>
                        <ip>
                            <address>
                                <access-list>{$STATIC_ACL_V4}</access-list>
                            </address>
                        </ip>
                    </match>
                </route-map>
                <route-map xmlns="http://tail-f.com/ned/cisco-nx">
                    <name>{$STATIC_RM_V6}</name>
                    <sequence>10</sequence>
                    <match>
                        <ipv6>
                            <address>
                                <access-list>{$STATIC_ACL_V6}</access-list>
                            </address>
                        </ipv6>
                    </match>
                </route-map>
                <key xmlns="http://tail-f.com/ned/cisco-nx">
                    <chain>
                        <name>{$KEY_CHAIN}</name>
                        <key>
                            <id>1</id>
                            <cryptographic-algorithm>HMAC-SHA-256</cryptographic-algorithm>
                            <key-string>
                                <key-type>0</key-type>
                                <key-value>{$KEY}</key-value>
                            </key-string>
                        </key>
                    </chain>
                </key>
                <router xmlns="http://tail-f.com/ned/cisco-nx">
                    <ospf>
                        <id>1</id>
                        <passive-interface>
                            <default/>
                        </passive-interface>
                        <router-id>{$ROUTER_ID}</router-id>
                        <auto-cost>
                            <reference-bandwidth>{$BANDWIDTH}</reference-bandwidth>
                            <rate-unit>Gbps</rate-unit>
                        </auto-cost>
                        <redistribute>
                            <static>
                                <route-map>{$STATIC_RM_V4}</route-map>
                            </static>
                        </redistribute>
                        <?if {$LOCAL_AS != ""}?>
                        <redistribute>
                            <bgp>
                                <as-number>{$LOCAL_AS}</as-number>
                                <route-map>{$BGP_RM}</route-map>
                            </bgp>
                        </redistribute>
                        <?end?>
                    </ospf>
                    <ospfv3>
                        <tag>1</tag>
                        <passive-interface>
                            <default/>
                        </passive-interface>
                        <router-id>{$ROUTER_ID}</router-id>
                        <auto-cost>
                            <reference-bandwidth>{$BANDWIDTH}</reference-bandwidth>
                            <rate-unit>Gbps</rate-unit>
                        </auto-cost>
                        <address-family>
                            <ipv6>
                                <unicast>
                                    <redistribute>
                                        <static>
                                            <route-map>{$STATIC_RM_V6}</route-map>
                                        </static>
                                    </redistribute>
                                    <?if {$LOCAL_AS != ""}?>
                                    <redistribute>
                                        <bgp>
                                            <as-number>{$LOCAL_AS}</as-number>
                                            <route-map>{$BGP_RM}</route-map>
                                        </bgp>
                                    </redistribute>
                                    <?end?>
                                </unicast>
                            </ipv6>
                        </address-family>
                    </ospfv3>
                </router>
            </config>
        </device>
    </devices>
</config-template>